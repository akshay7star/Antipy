---
title: "HTTP Requests"
description: "Making API calls and handling responses with the requests library."
order: 3
---

# Making HTTP Requests

The `requests` library is the standard way to communicate with web APIs in Python. While it requires `pip install requests`, it's used in virtually every Python project that talks to the internet.

## How APIs Work

<MermaidDiagram>
graph LR
  CODE["Your Code"] -- "GET /users" --> API["REST API"]
  API -- "200 OK + JSON" --> CODE
  style CODE fill:#3b82f6,stroke:#2563eb,color:#fff
  style API fill:#22c55e,stroke:#16a34a,color:#fff
</MermaidDiagram>

## HTTP Methods

| Method | Purpose | Has Body? |
|--------|---------|-----------|
| `GET` | Read data | No |
| `POST` | Create data | Yes |
| `PUT` | Replace data | Yes |
| `PATCH` | Partial update | Yes |
| `DELETE` | Remove data | Optional |

## Request Anatomy

```python
import requests

# GET — retrieve data
response = requests.get("https://api.example.com/users")
print(response.status_code)    # 200
print(response.json())         # Parse JSON response

# POST — send data
response = requests.post(
    "https://api.example.com/users",
    json={"name": "Alice", "email": "alice@example.com"},
    headers={"Authorization": "Bearer TOKEN123"}
)
```

## Status Codes

| Code | Meaning | Action |
|------|---------|--------|
| `200` | OK — success | Process data |
| `201` | Created | Resource was created |
| `400` | Bad Request | Fix your request |
| `401` | Unauthorized | Check authentication |
| `404` | Not Found | Wrong URL |
| `500` | Server Error | Retry later |

### Practice: API Pattern

<interactive-code>
# Simulating API request/response pattern
# (No real HTTP calls in the browser sandbox)

class MockResponse:
    def __init__(self, data, status=200):
        self._data = data
        self.status_code = status
    def json(self):
        return self._data

def mock_get(url):
    """Simulates requests.get()"""
    if "users" in url:
        return MockResponse({
            "users": [
                {"id": 1, "name": "Alice", "email": "alice@test.com"},
                {"id": 2, "name": "Bob", "email": "bob@test.com"},
            ]
        })
    return MockResponse({"error": "Not Found"}, 404)

# Usage — same pattern as real requests library
response = mock_get("https://api.example.com/users")

if response.status_code == 200:
    data = response.json()
    print(f"Got {len(data['users'])} users:")
    for user in data["users"]:
        print(f"  {user['name']} ({user['email']})")
else:
    print(f"Error: {response.status_code}")
</interactive-code>

## Error Handling for API Calls

```python
try:
    response = requests.get(url, timeout=5)
    response.raise_for_status()   # Raises HTTPError for 4xx/5xx
    data = response.json()
except requests.ConnectionError:
    print("Cannot connect to server")
except requests.Timeout:
    print("Request timed out")
except requests.HTTPError as e:
    print(f"HTTP error: {e}")
```

> **Pro Tip:** Always set a `timeout` on requests: `requests.get(url, timeout=5)`. Without it, your program can hang indefinitely if the server doesn't respond.

> **Common Mistake:** Not checking `response.status_code` before processing the response. A 404 or 500 response still returns data — but it's an error message, not your expected data.

<InlineQuiz id="quiz-req-1" question="What is the requests library used for?" options={["File I/O", "Making HTTP requests to web APIs", "Regular expressions", "Database queries"]} correct={1} explanation="The requests library makes HTTP requests simple: requests.get(url), requests.post(url, data). It's the most popular HTTP library." />

<InlineQuiz id="quiz-req-2" question="What does requests.get(url) return?" options={["A string", "A Response object", "A dictionary", "The raw HTML"]} correct={1} explanation="get() returns a Response object with attributes like .status_code, .text, .json(), .headers, .content." />

<InlineQuiz id="quiz-req-3" question="What does a 200 status code mean?" options={["Error", "Not Found", "Success (OK)", "Redirect"]} correct={2} explanation="200 OK means the request was successful. 404 = Not Found, 500 = Server Error, 301 = Redirect." />

<InlineQuiz id="quiz-req-4" question="How do you send JSON data in a POST request?" options={["requests.post(url, data=json_str)", "requests.post(url, json=my_dict)", "requests.post(url, body=data)", "requests.json(url, data)"]} correct={1} explanation="The json= parameter automatically serializes the dict and sets Content-Type to application/json." />

<InlineQuiz id="quiz-req-5" question="What does response.json() do?" options={["Returns raw text", "Parses the JSON response body into a Python dict/list", "Sends a JSON request", "Validates JSON"]} correct={1} explanation="response.json() parses the response body as JSON and returns the equivalent Python object (usually a dict or list)." />

<InlineQuiz id="quiz-req-6" question="How do you add headers to a request?" options={["requests.get(url, head={})", "requests.get(url, headers={&apos;key&apos;: &apos;value&apos;})", "requests.header(url, {})", "headers are automatic"]} correct={1} explanation="Pass a headers dict: requests.get(url, headers={'Authorization': 'Bearer token', 'Accept': 'application/json'})." />

<InlineQuiz id="quiz-req-7" question="What does response.raise_for_status() do?" options={["Prints the status", "Raises an HTTPError if the response was unsuccessful (4xx/5xx)", "Returns the status", "Logs the request"]} correct={1} explanation="raise_for_status() raises an HTTPError for bad responses. It's the recommended way to check for request failure." />

<InlineQuiz id="quiz-req-8" question="How do you pass query parameters?" options={["Add them to the URL manually", "requests.get(url, params={&apos;key&apos;: &apos;value&apos;})", "Both work but B is cleaner", "requests.query(url, key=value)"]} correct={2} explanation="Both work, but params= handles URL encoding automatically: requests.get(url, params={'q': 'hello world'}) properly encodes spaces." />

<InlineQuiz id="quiz-req-9" question="What is rate limiting?" options={["A speed of internet", "APIs limiting the number of requests you can make per time period", "A type of error", "A caching strategy"]} correct={1} explanation="Rate limiting restricts how many API requests you can make (e.g., 100/minute). Exceeding the limit usually returns a 429 status." />

<InlineQuiz id="quiz-req-10" question="What is a REST API?" options={["A sleeping API", "An architectural style using HTTP methods (GET, POST, PUT, DELETE)", "A real-time API", "A database API"]} correct={1} explanation="REST (Representational State Transfer) uses HTTP methods: GET (read), POST (create), PUT (update), DELETE (remove)." />
